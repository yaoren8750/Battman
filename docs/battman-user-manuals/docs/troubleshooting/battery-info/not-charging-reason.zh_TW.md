---
title: 未充電原因
---

# 未充電原因

「未充電原因」用於診斷在已連接充電器時設備為何沒有充電。該信息來自 Apple SMC（系統管理控制器），有助於定位充電異常的根因。

## 概覽

未充電原因存放在 SMC 鍵 `CHNC`（Charger Not Charging）中，不同設備代際使用不同格式：

- **版本 0（NonSMC）**：無 SMC 支持的早期設備
- **版本 1（Gibraltar/BNCR）**：枚舉格式，部分 Intel Mac 機型使用
- **版本 2（SMC/CHNC）**：位掩碼格式，Apple Silicon 及絕大多數現代設備使用

通過讀取 SMC 鍵 `RGEN`（Reason Generation）確定版本。

## 版本 2（SMC/CHNC）— 現代設備

版本 2 採用位掩碼，可同時包含多個原因。這是 Apple Silicon 與多數設備的主流格式（截至 2025）。

### 常見原因

| 原因 | 說明 |
|------|------|
| **已充滿電** | 電池容量已達 100% |
| **溫度過低** | 電池溫度低於停止充電閾值 |
| **溫度過高** | 電池溫度高於停止充電閾值 |
| **溫度過低，無法開始** | 電池溫度過低，無法開始充電 |
| **溫度過高，無法開始** | 電池溫度過高，無法開始充電 |

### 檢測與存在問題

| 原因 | 說明 |
|------|------|
| **充電器超時** | 充電超過 15 小時或觸發超時標誌 |
| **未檢測到電池** | 系統未檢測到電池 |
| **未檢測到總線供電** | USB 供電總線上無電源 |

### 充電抑制條件

| 原因 | 說明 |
|------|------|
| **電量與溫度高而停止** | 因高電量且溫度高而停止充電 |
| **傳感器交互失敗** | 與電池管理傳感器通信失敗 |

### 系統模式

| 原因 | 說明 |
|------|------|
| **正在連接配件** | IOAccessoryManager 正在管理配件連接 |
| **展示模式** | 設備處於展示/亭模式，可能抑制充電 |
| **CoreMotion** | CoreMotion 框架控制充電行為 |
| **正在連接 USB-PD** | USB-PD 協商進行中 |

### 充電控制

| 原因 | 說明 |
|------|------|
| **setbatt 控制** | 由 `setbatt` 工具或系統組件控制充電 |
| **優化電池充電** | 系統執行預測/優化充電以保護電池健康 |
| **無線充電控制** | 無線/感應式充電器接管充電流程 |
| **電量計固件正在升級** | 電量計（Gas Gauge）固件更新中（常見於 MagSafe） |
| **不支持電池充電流抑制** | 電池硬件不支持軟件層抑制充電流 |
| **PCTM** | Power Control Thermal Management 活動中 |
| **抑制客戶端適配器** | 客戶端適配器充電被抑制 |
| **電芯電壓過高** | 一個或多個電芯電壓超出安全閾值 |
| **電池未請求充電** | 電池管理系統未請求充電 |
| **相機流式傳輸** | 連續互聯相機/攝像頭串流佔用（macOS 13 / iOS 16+） |

### 系統控制

| 原因 | 說明 |
|------|------|
| **VACTFB** | 電壓/電流反饋控制充電 |
| **診斷** | 設備處於現場診斷模式 |
| **電流抑制** | 系統顯式抑制了充電流入 |
| **測試運輸模式** | 設備處於運營商測試模式 |

### 永久性故障

出現以下情況通常意味著硬件或固件嚴重故障，可能需要送修：

| 原因 | 說明 |
|------|------|
| **充電時間過長** | 充電持續時間異常過長 |
| **電池電壓故障** | 檢測到電池電壓故障 |
| **電池電流故障** | 檢測到電池電流下限故障 |
| **充電器交互失敗** | 與充電器通信失敗 |
| **電芯檢查失敗** | 電芯完整性檢查失敗 |

當檢測到任何永久性故障時，系統可能會以「電池永久故障」作為主提示。

## 版本 1（Gibraltar/BNCR）— Intel Mac 機型

版本 1 使用枚舉格式，任一時刻僅有一個原因生效，適用於部分 Intel Mac：

- J132, J137, J140, J152, J213, J214, J215, J680, J780

### 常見原因

| 值 | 原因 | 說明 |
|----|------|------|
| `NO_REASON` | 無 | 正常充電 |
| `NO_AC` | 無交流電源 | 未檢測到交流電適配器 |
| `NO_BATTERY` | 無電池 | 未檢測到電池 |
| `BAD_BATTERY` | 電池故障 | 電池健康檢查失敗 |
| `BATTERY_FC` | 已充滿電 | 電池已滿 |
| `BATTERY_NO_CHG_REQ` | 電池未請求充電 | 電池管理系統未請求充電 |
| `AC_INSERT` | 正在使用交流電源 | 僅使用外接電源運行 |
| `G3` | G3 設備休眠 | 處於 G3 電源狀態 |
| `ADAPTER_DISABLED` | 適配器未啓用 | 適配器被禁用 |
| `ADAPTER_UNKNOWN` | 未知適配器 | 適配器無法識別 |
| `ADAPTER_NOT_ALLOW_CHARGING` | 不受允許的適配器 | 適配器未獲授權充電 |
| `CALIBRATION` | 校准中 | 正在校准電池 |
| `B0LI_0` | 充電已關閉 | 充電被禁用 |
| `OS_NO_CHG` | 系統充電已關閉 | 操作系統禁用充電 |
| `BCLM_REACHED` | 達到充電限制 | 已達到充電上限 |
| `UPSTREAM_NO_CHG` | 上行充電已關閉 | 上游控制禁用充電 |
| `PM_NO_CHG` | 電源管理充電已關閉 | 電源管理禁用充電 |
| `TB0T_OVER_50` | 電池溫度大於50℃ | 電池溫度超過 50℃ |
| `TB0T_OVER_45` | 電池溫度大於45℃ | 電池溫度超過 45℃ |
| `TEMP_GRADIENT_TOO_HIGH` | 溫度梯度過高 | 電池溫度變化過快 |
| `TEMP_NOT_ATV_VLD` | TEMP_NOT_ATV_VLD | 溫度讀數無效 |
| `BATTERY_TCA` | BATTERY_TCA | 電池熱控制激活 |
| `OW_TDM_LINK_ACTIVE` | OW_TDM_LINK_ACTIVE | 單線通信激活 |
| `CELL_VOLTAGE_TOO_HIGH` | 電芯電壓過高 | 電芯電壓超出安全範圍 |
| `OBC_NO_CHG` | 優化電池充電 | 優化電池充電生效 |
| `VACTFB_NO_CHG` | VACTFB_NO_CHG | 電壓/電流反饋阻止充電 |
| `OBC_NO_INFLOW` | 優化電池充電（輸入） | 優化電池充電阻止電流流入 |

## 版本 0（NonSMC）— 早期設備

版本 0 用於不具備 SMC 的老設備，已知包括：

- D10, D11
- J71, J72, J73, J81, J82, J85, J86, J87, J96, J97, J98, J99, J120, J121, J127, J128, J171, J172, J207, J208
- N27, N28, N61, N66, N69, N71, N74, N75, N111, N121

### NonSMC 專用原因

| 原因 | 說明 |
|------|------|
| **POSM Mode** | 自檢/開機模式 |
| **Display** | 顯示相關的充電控制 |
| **溫度過低** | 電池溫度過低 |
| **溫度過高** | 電池溫度過高 |
| **完成** | 充電完成 |
| **時間過長** | 充電時長超限 |
| **CHG_WD** | 充電器 watchdog 超時 |

## 讀數解讀

未充電原因通常以十六進制展示（如 `0x00000001`）。在版本 2（位掩碼）中可同時置多位，表示多個原因並存。

### 示例

- `0x00000001` - 已充滿電
- `0x00000002` - 溫度過低
- `0x00000004` - 溫度過高
- `0x00000003` - 已充滿電且溫度過低（兩位同時置位）

## 故障排查提示

1. **溫度問題**：出現「溫度過低/過高」時，讓設備回到 0–35℃ 的正常工作溫度範圍。
2. **優化電池充電**：顯示「優化電池充電」屬正常行為，系統在學習使用模式以延長電池壽命。
3. **固件更新**：出現「電量計固件正在升級」為暫時狀態，完成更新後會恢復。
4. **永久故障**：若出現任何永久性故障提示，電池或充電系統可能需要檢修。
5. **多重原因**：版本 2 可同時觸發多條原因，請結合全部列出的原因判斷當前充電狀態。

## 技術說明

- 未充電原因來自 SMC 鍵 `CHNC`（多數設備 8 字節，移動設備 64 字節）
- 版本/代際由 SMC 鍵 `RGEN` 確定