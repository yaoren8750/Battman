---
title: 未充电原因
---

# 未充电原因

“未充电原因”用于诊断在已连接充电器时设备为何没有充电。该信息来自 Apple SMC（系统管理控制器），有助于定位充电异常的根因。

## 概览

未充电原因存放在 SMC 键 `CHNC`（Charger Not Charging）中，不同设备代际使用不同格式：

- **版本 0（NonSMC）**：无 SMC 支持的早期设备
- **版本 1（Gibraltar/BNCR）**：枚举格式，部分 Intel Mac 机型使用
- **版本 2（SMC/CHNC）**：位掩码格式，Apple Silicon 及绝大多数现代设备使用

通过读取 SMC 键 `RGEN`（Reason Generation）确定版本。

## 版本 2（SMC/CHNC）— 现代设备

版本 2 采用位掩码，可同时包含多个原因。这是 Apple Silicon 与多数设备的主流格式（截至 2025）。

### 常见原因

| 原因 | 说明 |
|------|------|
| **已充满电** | 电池容量已达 100% |
| **温度过低** | 电池温度低于停止充电阈值 |
| **温度过高** | 电池温度高于停止充电阈值 |
| **温度过低，无法开始** | 电池温度过低，无法开始充电 |
| **温度过高，无法开始** | 电池温度过高，无法开始充电 |

### 检测与存在问题

| 原因 | 说明 |
|------|------|
| **充电器超时** | 充电超过 15 小时或触发超时标志 |
| **未检测到电池** | 系统未检测到电池 |
| **未检测到总线供电** | USB 供电总线上无电源 |

### 充电抑制条件

| 原因 | 说明 |
|------|------|
| **电量与温度高而停止** | 因高电量且温度高而停止充电 |
| **传感器交互失败** | 与电池管理传感器通信失败 |

### 系统模式

| 原因 | 说明 |
|------|------|
| **正在连接配件** | IOAccessoryManager 正在管理配件连接 |
| **展示模式** | 设备处于展示/亭模式，可能抑制充电 |
| **CoreMotion** | CoreMotion 框架控制充电行为 |
| **正在连接 USB-PD** | USB-PD 协商进行中 |

### 充电控制

| 原因 | 说明 |
|------|------|
| **setbatt 控制** | 由 `setbatt` 工具或系统组件控制充电 |
| **优化电池充电** | 系统执行预测/优化充电以保护电池健康 |
| **无线充电控制** | 无线/感应式充电器接管充电流程 |
| **电量计固件正在升级** | 电量计（Gas Gauge）固件更新中（常见于 MagSafe） |
| **不支持电池充电流抑制** | 电池硬件不支持软件层抑制充电流 |
| **PCTM** | Power Control Thermal Management 活动中 |
| **抑制客户端适配器** | 客户端适配器充电被抑制 |
| **电芯电压过高** | 一个或多个电芯电压超出安全阈值 |
| **电池未请求充电** | 电池管理系统未请求充电 |
| **相机流式传输** | 连续互联相机/摄像头串流占用（macOS 13 / iOS 16+） |

### 系统控制

| 原因 | 说明 |
|------|------|
| **VACTFB** | 电压/电流反馈控制充电 |
| **诊断** | 设备处于现场诊断模式 |
| **电流抑制** | 系统显式抑制了充电流入 |
| **测试运输模式** | 设备处于运营商测试模式 |

### 永久性故障

出现以下情况通常意味着硬件或固件严重故障，可能需要送修：

| 原因 | 说明 |
|------|------|
| **充电时间过长** | 充电持续时间异常过长 |
| **电池电压故障** | 检测到电池电压故障 |
| **电池电流故障** | 检测到电池电流下限故障 |
| **充电器交互失败** | 与充电器通信失败 |
| **电芯检查失败** | 电芯完整性检查失败 |

当检测到任何永久性故障时，系统可能会以“电池永久故障”作为主提示。

## 版本 1（Gibraltar/BNCR）— Intel Mac 机型

版本 1 使用枚举格式，任一时刻仅有一个原因生效，适用于部分 Intel Mac：

- J132, J137, J140, J152, J213, J214, J215, J680, J780

### 常见原因

| 值 | 原因 | 说明 |
|----|------|------|
| `NO_REASON` | 无 | 正常充电 |
| `NO_AC` | 无交流电源 | 未检测到交流电适配器 |
| `NO_BATTERY` | 无电池 | 未检测到电池 |
| `BAD_BATTERY` | 电池故障 | 电池健康检查失败 |
| `BATTERY_FC` | 已充满电 | 电池已满 |
| `BATTERY_NO_CHG_REQ` | 电池未请求充电 | 电池管理系统未请求充电 |
| `AC_INSERT` | 正在使用交流电源 | 仅使用外接电源运行 |
| `G3` | G3 设备休眠 | 处于 G3 电源状态 |
| `ADAPTER_DISABLED` | 适配器未启用 | 适配器被禁用 |
| `ADAPTER_UNKNOWN` | 未知适配器 | 适配器无法识别 |
| `ADAPTER_NOT_ALLOW_CHARGING` | 不受允许的适配器 | 适配器未获授权充电 |
| `CALIBRATION` | 校准中 | 正在校准电池 |
| `B0LI_0` | 充电已关闭 | 充电被禁用 |
| `OS_NO_CHG` | 系统充电已关闭 | 操作系统禁用充电 |
| `BCLM_REACHED` | 达到充电限制 | 已达到充电上限 |
| `UPSTREAM_NO_CHG` | 上行充电已关闭 | 上游控制禁用充电 |
| `PM_NO_CHG` | 电源管理充电已关闭 | 电源管理禁用充电 |
| `TB0T_OVER_50` | 电池温度大于50℃ | 电池温度超过 50℃ |
| `TB0T_OVER_45` | 电池温度大于45℃ | 电池温度超过 45℃ |
| `TEMP_GRADIENT_TOO_HIGH` | 温度梯度过高 | 电池温度变化过快 |
| `TEMP_NOT_ATV_VLD` | TEMP_NOT_ATV_VLD | 温度读数无效 |
| `BATTERY_TCA` | BATTERY_TCA | 电池热控制激活 |
| `OW_TDM_LINK_ACTIVE` | OW_TDM_LINK_ACTIVE | 单线通信激活 |
| `CELL_VOLTAGE_TOO_HIGH` | 电芯电压过高 | 电芯电压超出安全范围 |
| `OBC_NO_CHG` | 优化电池充电 | 优化电池充电生效 |
| `VACTFB_NO_CHG` | VACTFB_NO_CHG | 电压/电流反馈阻止充电 |
| `OBC_NO_INFLOW` | 优化电池充电（输入） | 优化电池充电阻止电流流入 |

## 版本 0（NonSMC）— 早期设备

版本 0 用于不具备 SMC 的老设备，已知包括：

- D10, D11
- J71, J72, J73, J81, J82, J85, J86, J87, J96, J97, J98, J99, J120, J121, J127, J128, J171, J172, J207, J208
- N27, N28, N61, N66, N69, N71, N74, N75, N111, N121

### NonSMC 专用原因

| 原因 | 说明 |
|------|------|
| **POSM Mode** | 自检/开机模式 |
| **Display** | 显示相关的充电控制 |
| **温度过低** | 电池温度过低 |
| **温度过高** | 电池温度过高 |
| **完成** | 充电完成 |
| **时间过长** | 充电时长超限 |
| **CHG_WD** | 充电器 watchdog 超时 |

## 读数解读

未充电原因通常以十六进制展示（如 `0x00000001`）。在版本 2（位掩码）中可同时置多位，表示多个原因并存。

### 示例

- `0x00000001` - 已充满电
- `0x00000002` - 温度过低
- `0x00000004` - 温度过高
- `0x00000003` - 已充满电且温度过低（两位同时置位）

## 故障排查提示

1. **温度问题**：出现“温度过低/过高”时，让设备回到 0–35℃ 的正常工作温度范围。
2. **优化电池充电**：显示“优化电池充电”属正常行为，系统在学习使用模式以延长电池寿命。
3. **固件更新**：出现“电量计固件正在升级”为暂时状态，完成更新后会恢复。
4. **永久故障**：若出现任何永久性故障提示，电池或充电系统可能需要检修。
5. **多重原因**：版本 2 可同时触发多条原因，请结合全部列出的原因判断当前充电状态。

## 技术说明

- 未充电原因来自 SMC 键 `CHNC`（多数设备 8 字节，移动设备 64 字节）
- 版本/代际由 SMC 键 `RGEN` 确定